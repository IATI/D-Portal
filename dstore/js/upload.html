<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>d-preview</title>
		<link href="https://cdn.jsdelivr.net/npm/iati-design-system@4.0.0/dist/css/iati.min.css" rel="stylesheet" />
		<script src="https://cdn.jsdelivr.net/npm/iati-design-system@4.0.0/dist/js/iati.js"></script>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Khula:wght@700&display=swap" rel="stylesheet"> 
		<style>
			body { margin: 0; }

			/*	UPLOAD BOX SECTION	*/

			.upload_box 	{border-radius:10px 10px 0 0; margin:0 auto; text-align:center; background:#eee; height:260px; max-height:260px; width:798px;}
			.upload_box:hover	{background:#f0f0f0;}
			.upload_label	{cursor:pointer; max-height:260px; width:798px; height:260px; display:flex; align-items:center; justify-content:flex-start; flex-direction:column;}
			.upload_input	{filter:alpha(opacity=0); opacity:0; height:1px;}
			.upload_text	{width:300px; color:#666; margin-top:3.5em;}
			.upload_text span	{display:block; font-size:14px;}
			span.upload_icon	{font-size:30px; background-color:#ddd; border-radius:50px; height:50px; width:50px; text-align:center; line-height:50px; color:#fff; margin:0 auto; margin-top:15px;}

			/*	TYPE A URL SECTION	*/

			.upload_url_box	{margin:0 auto; text-align:center;}
			input#xmlurl	{font-size:16px; width:798px; height:40px; border:1px solid #ccc; border-radius:0 0 6px 6px; padding-left:10px;}

			/*	MEDIA QUERIES	*/
			@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
			only screen and (-o-min-device-pixel-ratio: 3/2),
			only screen and (min--moz-device-pixel-ratio: 1.5),
			only screen and (min-device-pixel-ratio: 1.5) {
				.upload_box,
				input#xmlurl	{width:90%; font-size:14px;}
				.upload_box		{height:160px;}
				.upload_text	{margin-top:1.25em;}
				.content_wrap,
				.upload_label	{width:initial;}
			}
		</style>
	</head>
	<body class="iati-design-system--enabled">

		<div class="iati-title-bar">
			<header class="iati-header">

			  <div class="iati-header__section iati-header__section--first">
				<div class="iati-header__container">

				  <a href="https://iatistandard.org/" aria-label="Go to IATI homepage">
					<img class="iati-header__logo" alt=""
					  src="http://styles.iatistandard.org/assets/svg/source/logo-colour.svg" />
				  </a>

				  <nav class="iati-header__general-nav">
					<ul class="iati-piped-list">
					  <li><a href="https://iatistandard.org/en/about/">About IATI</a></li>
					  <li><a href="https://iatistandard.org/en/using-data/">Use Data</a></li>
					  <li><a href="https://iatistandard.org/en/guidance/publishing-data/">Publish Data</a></li>
					  <li><a href="https://iatistandard.org/guidance/get-support/">Contact</a></li>
					</ul>
				  </nav>
				</div>
			  </div>

			  <div class="iati-header__section iati-header__section--last iati-brand-background">
				<div class="iati-header__container iati-brand-background__content">

				  <div class="iati-header__actions">
					<div class="iati-country-switcher">
					  <label for="iati-country-switcher" class="iati-country-switcher__label">Choose your language</label>
					  <select id="iati-country-switcher" class="iati-country-switcher__control">
						<option>English</option>
					  </select>
					</div>

					<a href="https://docs.d-portal.org/en/latest/d_preview/" class="iati-button iati-button--light hide--mobile-nav">
						<span>Help Docs</span>
						<i class="iati-icon iati-icon--info"></i>
					</a>

				  </div>

				  <div class="iati-header-title">
					<p class="iati-header-title__eyebrow">IATI Tools</p>
					<p class="iati-header-title__heading">D-Preview</p>
				  </div>


				  <div class="iati-header__nav">
					<nav>
					  <ul class="iati-tool-nav">
						<li><a href="https://preview.d-portal.org/upload" class="iati-tool-nav-link">d-preview</a></li>
					  </ul>
					</nav>
				  </div>

				</div>
			  </div>
			</header>

		</div>

		<main class="iati-main">
			<div>
				<h1>Make a d-preview</h1>
				<h4>Generate a private d-preview site with IATI xml</h4>
				<p>Upload from your computer, or use a link to a file that is on the web.</p>
			</div>
			<div>
				<form id="form" action="/upload" method="post" enctype="multipart/form-data">
					<div class="upload_box" id="xml_box">
						<label class="upload_label">
							<input class="upload_input" type="file" name="xml" id="xml" aria-label="Upload File"/>
							<span class="upload_text">
								Select xml
								<span>(Maximum 40mb)</span>
								<span class="upload_icon">&#8613;</span>
							</span>
						</label>
					</div>
					<div class="upload_url_box" id="xml_url_box">
						<label class="upload_url_label">
							<input type="text" name="xmlurl" id="xmlurl" placeholder="Type a URL and press Enter" aria-label="Type Url"/>
						</label>
					</div>
				</form>
			</div>
			<div>
				Haven't got any IATI XML to hand? Try our example <a id="example">activity</a>.
			</div>
			<script>
			document.getElementById("example").onclick = function() {
				document.getElementById("xmlurl").value = "https://raw.githubusercontent.com/OpenDataServices/iati-sample-data/master/IATI-CoVE-sample-activity-standard.xml";
				document.getElementById("form").submit();
			};
			</script>
		</main>

		<footer class="iati-footer iati-brand-background">
			<div class="iati-brand-background__content">

				<div class="iati-footer__section iati-footer__section--first">
					<div class="iati-footer__container">
					  <div class="iati-footer-block">
						<h2 class="iati-footer-block__title">Useful links</h2>
						<div class="iati-footer-block__content">
						  <ul>
							<li><a href="http://github.com/notshi/d-preview">Project page, issues and feedback on Github</a></li>
							<li><a href="https://notshi.github.io/d-preview/">Stats</a></li>
						  </ul>
						</div>
					  </div>
					</div>
				</div>

				<div class="iati-footer__section">
					<div class="iati-footer__container">
					  <div class="iati-footer-block">
						<h2 class="iati-footer-block__title">Additional information</h2>
						<div class="iati-footer-block__content iati-footer-block__content--columns">
						  <div>
							<p>d-preview helps organisations understand the data they are publishing.</p>
						  </div>
						  <div>
							<p>For preview purposes only. Data will not be uploaded to the main live d-portal website.</p>
							<p>This is a community hosted service. All preview instances will auto-delete after ten days.</p>
						  </div>
						</div>
					  </div>
					</div>
				</div>

				<div class="iati-footer__section iati-footer__section--last">
				  <div class="iati-footer__container">
					<nav>
					  <ul class="iati-piped-list iati-footer__legal-nav">
						<li><a href="https://iatistandard.org/en/privacy-policy/">Privacy</a></li>
						<li><a href="https://web-terms.iatistandard.org/en/latest/cookie-policy/">Cookies</a></li>
						<li><a href="https://web-terms.iatistandard.org/en/latest/copyright/">Copyright</a></li>
						<li><a href="https://iatistandard.org/en/data-removal/">Data Removal</a></li>
					  </ul>
					</nav>

					<div class="iati-country-switcher">
					  <label for="iati-country-switcher-footer" class="iati-country-switcher__label">Choose your language</label>
					  <select id="iati-country-switcher-footer" class="iati-country-switcher__control">
						<option>English</option>
					  </select>
					</div>

					<div class="iati-footer__social">
					  <a href="https://www.linkedin.com/company/international-aid-transparency-initiative/" aria-label="LinkedIn">
						<i class="iati-icon iati-icon--linkedin"></i>
					  </a>
					  <a href="https://x.com/IATI_aid" aria-label="X">
						<i class="iati-icon iati-icon--x"></i>
					  </a>
					  <a href="https://www.youtube.com/channel/UCAVH1gcgJXElsj8ENC-bDQQ" aria-label="YouTube">
						<i class="iati-icon iati-icon--youtube"></i>
					  </a>
					  <a href="https://www.facebook.com/IATIaid" aria-label="Facebook">
						<i class="iati-icon iati-icon--facebook"></i>
					  </a>
					</div>
				  </div>
				</div>
			</div>
		</footer>

		<script>
		document.getElementById("xml").onchange = function() {
			document.getElementById("form").submit();
		};
		document.getElementById("xmlurl").onchange = function() {
			document.getElementById("form").submit();
		};
		</script>	
	</body>
</html>
