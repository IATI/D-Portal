
upstream nodejsapp {

        server 127.0.0.1:1408;

}


server {
    listen 8000;
    server_name supersecretlink.d-portal.org;
    return 301 $scheme://d-preview.codeforiati.org/upload;
}

server {
	server_name d-portal.iatistandard.org;
	listen *:80;
	listen *:443 ssl;
	listen [::]:80;
	listen [::]:443 ssl;
	ssl_certificate /etc/letsencrypt/live/d-portal.iatistandard.org/fullchain.pem; # managed by Certbot
	ssl_certificate_key /etc/letsencrypt/live/d-portal.iatistandard.org/privkey.pem; # managed by Certbot
	include /dportal/box/nginx-include;
}

server {
	server_name d-portal.org;
	listen *:80 default_server;
	listen *:443 ssl default_server;
	listen [::]:80 default_server;
	listen [::]:443 ssl default_server;
	ssl_certificate /etc/letsencrypt/live/d-portal.org/fullchain.pem; # managed by Certbot
	ssl_certificate_key /etc/letsencrypt/live/d-portal.org/privkey.pem; # managed by Certbot
# no longer serv just redirect
#	include /dportal/box/nginx-include;
	return 301 https://d-portal.iatistandard.org$request_uri;
}

server {
	server_name test.d-portal.org;
	listen *:80;
	listen *:443 ssl;
	listen [::]:80;
	listen [::]:443 ssl;
	ssl_certificate /etc/letsencrypt/live/test.d-portal.org/fullchain.pem; # managed by Certbot
	ssl_certificate_key /etc/letsencrypt/live/test.d-portal.org/privkey.pem; # managed by Certbot
	include /dportal/box/nginx-include;
}

server {
	server_name classic.d-portal.org;
	listen *:80;
	listen *:443 ssl;
	listen [::]:80;
	listen [::]:443 ssl;
	ssl_certificate /etc/letsencrypt/live/classic.d-portal.org/fullchain.pem; # managed by Certbot
	ssl_certificate_key /etc/letsencrypt/live/classic.d-portal.org/privkey.pem; # managed by Certbot
	include /dportal/box/nginx-include;
}
